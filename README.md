# 볼링 게임 점수판

## [Step1] 질문 삭제하기 기능 리팩토링

### 기능 요구사항

* 질문 데이터를 완전히 삭제하는 것이 아니라 데이터의 상태를 삭제 상태(deleted - boolean type)로 변경한다.
* 로그인 사용자와 질문한 사람이 같은 경우 삭제 가능하다.
* 답변이 없는 경우 삭제가 가능하다.
* 질문자와 답변글의 모든 답변자가 같은 경우 삭제가 가능하다.
* 질문을 삭제할 때 답변 또한 삭제해야 하며, 답변의 삭제 또한 삭제 상태(deleted)를 변경한다.
* 질문자와 답변자가 다른 경우 답변을 삭제 할 수 없다.
* 질문과 답변 삭제 이력에 대한 정보를 DeleteHistory를 활용해 남긴다.

### 프로그래밍 요구 사항

* qna.service.QnaService 의 deleteQuestion()는 앞의 질문 삭제 기능을 구현한 코드이다. 이 메소드는 단위 테스트하기 어려운 코드와 단위 테스트 가능한 코드가 섞여 있다.
* 단위 테스트하기 어려운 코드와 단위 테스트 가능한 코드를 분리해 단위 테스트 가능한 코드에 대해 단위 테스트를 구현한다.

### 피드백

* [X] Answer 의 유효성 검사 위치
* [X] DeleteHistory 의 정적 팩토리 메서드를 활용한 가독성 향상
* [X] Answer 의 delete 메서드에서 List<DeleteHistory> 를 받는 부분

## [Step2] 볼링 점수판(그리기)

### 기능 요구사항

* 최종 목표는 볼링 점수를 계산하는 프로그램을 구현한다. 1단계 목표는 점수 계산을 제외한 볼링 게임 점수판을 구현하는 것이다.
* 각 프레임이 스트라이크이면 "X", 스페어이면 "9 | /", 미스이면 "8 | 1", 과 같이 출력하도록 구현한다.
* 스트라이크(strike) : 프레임의 첫번째 투구에서 모든 핀(10개)을 쓰러트린 상태
* 스페어(spare) : 프레임의 두번재 투구에서 모든 핀(10개)을 쓰러트린 상태
* 미스(miss) : 프레임의 두번재 투구에서도 모든 핀이 쓰러지지 않은 상태
* 거터(gutter) : 핀을 하나도 쓰러트리지 못한 상태. 거터는 "-"로 표시
* 10 프레임은 스트라이크이거나 스페어이면 한 번을 더 투구할 수 있다.

### 구현 사항

* [X] 이름 규칙(3글자 영어문자) 검증 기능
* [X] 넘어진 볼링 핀 갯수 검증 기능
* [X] 일반 프레임에 대해 1회 혹은 2회 기록 기능
* [X] 일반 프레임들의 기록 및 종료 기능
* [X] 마지막 프레임의 기록 및 종료 기능

### 피드백 사항 정리

* 일반 프레임과 마지막 프레임 간의 연결(공통적인 기능 추상화)
* Gutter, Strike, Miss 등의 상태를 반환할 수 있도록 변경

### 2차 피드백 정리

* [X] 사용하지 않는 생성자 삭제
* [X] 접근제어자
* [X] 연속되는 로직의 검증조건 및 삭제 가능한 조건문
* [X] ENUM 활용
* [X] null Value 를 활용하지 않는 상태문
* [X] DTO 라고 이름만 붙어있는 BowlingGameDTO

### 3차 피드백 정리

* 화면 관련 로직
* FrameProgress 제거 -> 불필요한 상태

### 3차 피드백 이후 전체 삭제 및 기능 요구사항 다시 리스팅

* 일반 프레임 스페어의 경우 뒷 숫자는 "/"를 가짐

출력 관련 기능은 중간에 String makePrintForm(List<String> marks, int 프레임의_최대_피치_수) 으로 만들 수 있어보임

- 일반프레임 출력 케이스 정리
  * 0회 시도 -> "" -> "       ";
  * 1회만 시도 -> " - ", " 3 " -> " - |   ", " 3 |   "
  * 1회차 10점 -> " X " -> "   X   " (Strike)
  * 2회차 합쳐서 10 점 → " 4 | / " (Spare)
  * 2회차 합쳐서 10 점 X → " 4 | 4 "
  * 첫 시도가 0이 포함된 경우 → " - | 3 "

- 마지막 프레임의 출력 케이스 정리
  * 0회 시도 → "           "
  * 1회 시도 → " X | |   "
  * 2회 시도(스트라이크, 스트라이크) → " X | X |   "
  * 2회 시도 (스트라이크, 일반) → " X | 4 |   "
  * 2회 시도(스페어) → " 3 | / |   "
  * 2회 시도(일반) → " 4 | 4 |   "
  * 3회 시도 (스페어) → " - | / | 4 ", "4 | / | 5 ", "4 | / | X "
  * 3회 시도 (스트라이크) → " X | 4 | / ", " X | X | 6 ", " X | 3 | / ", " X | X | X "
- 일반 핀
  * 10 → " X "
  * n → " n "
  * 0 → " - "

볼링 관련 기능

* 볼링핀 10개에 대해 총 2회의 투구 기회를 가짐
  * 두 번의 투구 기회가 합쳐서 10개를 넘을 수 없음
* 1회에 끝날 수도 있고, 2회에 끝날 수도 있음
* 프레임은 9개가 연속되고
* 마지막 프레임은 투구 갯수가 최대 3회 제공됨
  * 첫 일반프레임 1개와 추가 투구, 혹은 추가 투구가 없을 수 있다.
  * 추가 기회는 첫 일반프레임이 Strike 혹은 Spare일 때 주어진다.

## [Step3] 볼링 점수판(점수 게임)

* 현재 프레임에서 다음 프레임을 생성하는 방식으로 구현해보기
* 피치마다 과거 프레임에 넘어진 핀 갯수를 넘겨줄 수 있는 방법 찾기. 혹은 미래의 프레임에서 가져오기

### 구현사항

* 프레임 결과 반환 기능 추가. description 과 점수, 누적점수 출력기능 포함?
* 프레임에 투구 결과 리스트를 반환하는 기능.(미래의 프레임에서 누적 결과를 가져올 때 사용)

* Frame에서 스코어를 반환해주는 기능
  * 필요시에 다음 프레임에 접근해서 피치 결과를 가져오는 기능
    - Strike -> Strike -> Strike : 3개의 프레임에 걸쳐서 이루어짐
    - Strike -> Miss, Spare
    - Strike -> 추가 점수 없음 : 예외 처리
    - Spare -> Strike, Spare, Miss
    - Spare -> 추가 시도 없음 등 : 예외 처리
  * [X] NormalFrame 에서 다음 NormalFrame 혹은 LastFrame 을 생성하는 기능
    * [X] NormalFrame 에서 다음 NormalFrame을 생성하는 기능
    * [X] LastFrame을 생성하는 기능

* 기타
  - LastFrame 스코어링 종료 이후 예외처리
